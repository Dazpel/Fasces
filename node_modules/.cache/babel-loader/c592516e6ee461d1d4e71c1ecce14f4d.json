{"ast":null,"code":"var _jsxFileName = \"/home/alexander/Desktop/Ironhack/Paxanimi/src/Components/ReceiptView/Receipt.jsx\";\nimport React, { Component } from 'react';\nimport { saveReceipt } from '../firebase/firebase.utils';\nimport axios from 'axios';\nimport ReceiptTable from './ReceiptTable';\nlet MY_URL_KEY = '31bb9650994211eab7efc1191d38e165';\nexport default class Receipt extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      imageUrl: ''\n    };\n\n    this.getReceiptData = ({\n      url,\n      id\n    }) => {\n      console.log(url);\n      let file = {\n        url: url,\n        headers: {\n          'x-custom-key': 'string'\n        }\n      };\n      axios.post('https://api.taggun.io/api/receipt/v1/simple/url', file, {\n        headers: {\n          apikey: MY_URL_KEY\n        }\n      }).then(function (response) {\n        saveReceipt(id, url, response.data.totalAmount.data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        imageUrl: ''\n      });\n    };\n\n    this.uploadAndScan = async url => {\n      console.log(url);\n      await this.getReceiptData(url);\n    };\n\n    this.handleFileUpload = e => {\n      console.log('The file to be uploaded is: ', e.target.files[0]);\n      const cloudName = 'dsxn0sfql';\n      const preset = 'w8mpx9l6';\n      let imgFile = e.target.files[0];\n      var url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;\n      var xhr = new XMLHttpRequest();\n      var fd = new FormData();\n      xhr.open('POST', url, true);\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n      xhr.onreadystatechange = e => {\n        if (xhr.readyState == 4 && xhr.status == 200) {\n          // File uploaded successfully\n          var response = JSON.parse(xhr.responseText);\n          console.log(response); // https://res.cloudinary.com/cloudName/image/upload/v1483481128/public_id.jpg\n\n          var url = response.secure_url;\n          var id = response.asset_id; // Create a thumbnail of the uploaded image, with 150px width\n\n          this.setState({\n            imageUrl: {\n              'url': url,\n              'id': id\n            }\n          });\n        }\n      };\n\n      fd.append('upload_preset', preset);\n      fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\n\n      fd.append('file', imgFile);\n      xhr.send(fd);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ReceiptTable, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.uploadAndScan(this.state.imageUrl),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, \"Upload\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: e => this.handleFileUpload(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/alexander/Desktop/Ironhack/Paxanimi/src/Components/ReceiptView/Receipt.jsx"],"names":["React","Component","saveReceipt","axios","ReceiptTable","MY_URL_KEY","Receipt","state","imageUrl","getReceiptData","url","id","console","log","file","headers","post","apikey","then","response","data","totalAmount","catch","error","setState","uploadAndScan","handleFileUpload","e","target","files","cloudName","preset","imgFile","xhr","XMLHttpRequest","fd","FormData","open","setRequestHeader","onreadystatechange","readyState","status","JSON","parse","responseText","secure_url","asset_id","append","send","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {saveReceipt} from '../firebase/firebase.utils'\nimport axios from 'axios';\nimport ReceiptTable from './ReceiptTable';\n\nlet MY_URL_KEY = '31bb9650994211eab7efc1191d38e165';\n\nexport default class Receipt extends Component {\n\n  state = {\n    imageUrl: ''\n  }\n\n\n  getReceiptData = ({url,id}) => {\n    console.log(url)\n    let file = {\n      url: url,\n      headers: {\n        'x-custom-key': 'string',\n      },\n    };\n\n    axios\n      .post('https://api.taggun.io/api/receipt/v1/simple/url', file, {\n        headers: {\n          apikey: MY_URL_KEY,\n        },\n      })\n      .then(function (response) {\n        saveReceipt(id, url, response.data.totalAmount.data)\n        \n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n      this.setState({\n        imageUrl: ''\n      })\n  };\n\n  uploadAndScan = async (url) => {\n    console.log(url)\n    await this.getReceiptData(url)\n\n   \n\n  };\n\n  handleFileUpload = (e) => {\n    console.log('The file to be uploaded is: ', e.target.files[0]);\n    const cloudName = 'dsxn0sfql';\n    const preset = 'w8mpx9l6';\n    let imgFile = e.target.files[0];\n\n    var url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;\n    var xhr = new XMLHttpRequest();\n    var fd = new FormData();\n    xhr.open('POST', url, true);\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n    xhr.onreadystatechange = (e) => {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        // File uploaded successfully\n        var response = JSON.parse(xhr.responseText);\n        console.log(response)\n        // https://res.cloudinary.com/cloudName/image/upload/v1483481128/public_id.jpg\n        var url = response.secure_url;\n        var id = response.asset_id\n        // Create a thumbnail of the uploaded image, with 150px width\n        this.setState({\n          imageUrl: {\n            'url':url,\n            'id': id\n          }\n        })\n\n        \n      }\n    };\n\n    fd.append('upload_preset', preset);\n    fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\n    fd.append('file', imgFile);\n    xhr.send(fd);\n\n    \n  };\n\n  render() {\n    return (\n      <div>\n          <ReceiptTable  />\n        <button onClick={() => this.uploadAndScan(this.state.imageUrl)}>Upload</button>\n        <input type=\"file\" onChange={(e) => this.handleFileUpload(e)} />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}